---
import BaseHead from '../components/layout/BaseHead.astro';
import Footer from '../components/layout/Footer.astro';
import Header from '../components/layout/Header.astro';
import Breadcrumbs from '../components/breadcrumbs/Breadcrumbs.astro';
import { SITE_DESCRIPTION } from '../consts';
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title="Contacto - MyCn18 Consultoría" description={SITE_DESCRIPTION} />
	</head>
	<body class="min-h-screen flex flex-col bg-guide-light dark:bg-cosmic-void">
		<Header />
		<Breadcrumbs path={Astro.url.pathname} />
		<main class="flex-grow bg-inherit py-16 px-8 text-center max-w-4xl mx-auto w-full">
			<h1 class="text-4xl sm:text-5xl font-extrabold mb-8">
				Contáctame para Consultoría
			</h1>
			<p class="text-lg max-w-3xl mx-auto mb-8">
				Estoy aquí para ayudarte a transformar tus ideas en soluciones robustas con MyCn18. 
				Completa el formulario y me pondré en contacto contigo lo antes posible.
			</p>

			<div class="contact-form-container max-w-xl mx-auto p-8 rounded-lg shadow-default dark:shadow-dark bg-guide-light dark:bg-cosmic-void border border-gray-200 dark:border-gray-700">
				<form action="https://formspree.io/f/mpwkzpee" method="POST" id="contact-form" class="text-left">
					
					<label for="name" class="block mb-1 text-oxygen-blue dark:text-oxygen-blue font-bold">Nombre:</label>
					<input 
						type="text" 
						id="name" 
						name="name" 
						required 
						class="w-full p-3 mb-4 border border-gray-300 dark:border-gray-600 rounded-md bg-guide-light dark:bg-cosmic-void focus:outline-none focus:ring-2 focus:ring-nitrogen-red"
					>

					<label for="email" class="block mb-1 text-oxygen-blue dark:text-oxygen-blue font-bold">Email:</label>
					<input 
						type="email" 
						id="email" 
						name="_replyto" 
						required 
						class="w-full p-3 mb-4 border border-gray-300 dark:border-gray-600 rounded-md bg-guide-light dark:bg-cosmic-void focus:outline-none focus:ring-2 focus:ring-nitrogen-red"
					>

					<label for="subject" class="block mb-1 text-oxygen-blue dark:text-oxygen-blue font-bold">Asunto:</label>
					<input 
						type="text" 
						id="subject" 
						name="_subject" 
						required 
						class="w-full p-3 mb-4 border border-gray-300 dark:border-gray-600 rounded-md bg-guide-light dark:bg-cosmic-void focus:outline-none focus:ring-2 focus:ring-nitrogen-red"
					>

					<label for="message" class="block mb-1 text-oxygen-blue dark:text-oxygen-blue font-bold">Mensaje:</label>
					<textarea 
						id="message" 
						name="message" 
						required 
						rows="6"
						class="w-full p-3 mb-6 border border-gray-300 dark:border-gray-600 rounded-md bg-guide-light dark:bg-cosmic-void focus:outline-none focus:ring-2 focus:ring-nitrogen-red"
					></textarea>

					<button 
						type="submit" 
						class="
							w-full 
							bg-nitrogen-red text-guide-light font-bold 
							py-3 px-6 rounded-full shadow-md 
							transition-all duration-300 hover:bg-opacity-90 
							focus:outline-none focus:ring-4 focus:ring-nitrogen-red/50
						"
					>
						Enviar Mensaje
					</button>
				</form>
			</div>
		</main>
		<Footer />
	</body>
</html>

<script is:inline>
	document.addEventListener('DOMContentLoaded', () => {
		const form = document.getElementById('contact-form');
		const subjectInput = document.getElementById('subject');
		const messageTextarea = document.getElementById('message');

		const urlParams = new URLSearchParams(window.location.search);
		const subjectParam = urlParams.get('subject');
		const bodyParam = urlParams.get('body');

		if (subjectParam && subjectInput) {
			subjectInput.value = decodeURIComponent(subjectParam);
		}

		if (bodyParam && messageTextarea) {
			messageTextarea.value = decodeURIComponent(bodyParam);
		}
	});
</script>